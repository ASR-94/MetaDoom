ACTOR MetaCyberdemon : MonsterCore
{
	Health 4000
	Radius 40
	Height 110
	Mass 1000
	Speed 16
	PainChance 20
	Monster
	MinMissileChance 160
	+BOSS 
	+MISSILEMORE
	+FLOORCLIP
	+NORADIUSDMG
	+DONTMORPH
	//+BOSSDEATH
	SeeSound "monsters/cyberdemon/see"
	PainSound "monsters/cyberdemon/pain"
	DeathSound "monsters/cyberdemon/die1"
	ActiveSound "monsters/cyberdemon/idle"
	Obituary "$OB_CYBORG"
	damagefactor ChaingunTurret, 0.2
	painchance ChaingunTurret, 0
	scale 0.75
	States
	{
	Spawn:
		CYBR AB 10 A_Look
		Loop
	See:
		"####" A 0
		{
			if (CountInv("BleedingCounter") > 0)
			{
				A_DamageSelf ((5), "Bleeding");
				A_TakeInventory("BleedingCounter", 1);
				A_CustomMissile ("FlyingBlood", 0, 0, random (0, 360), 2, random (0, 160));
				A_PlaySound("monsters/bleed", CHAN_5);
			}
		}
		CYBR A 0 A_Quake (3,4,0,750,0)
		CYBR A 3 { A_Chase; A_PlaySound("monsters/cyberdemon/hoof"); }
		CYBR ABBCC 3 A_Chase
		CYBR D 0 A_Quake (3,4,0,750,0)
		CYBR D 3 { A_Chase; A_PlaySound("spider/walk"); }
		CYBR D 3 A_Chase
		Loop
	Missile:
		CYBR E 0 
		CYBR E 0 A_Jump(64, "MissileWalking")
		goto MissileStanding
	MissileStanding:
		CYBR F 6 A_FaceTarget
		CYBR E 12 BRIGHT
		{
			A_CustomMissile("CyberdemonRocket", 48, -16);
			A_PlaySound ("weapons/rocketlauncher/fire", CHAN_WEAPON);
		}
		CYBR F 12 A_FaceTarget
		CYBR E 12 BRIGHT
		{
			A_CustomMissile("CyberdemonRocket", 48, -16);
			A_PlaySound ("weapons/rocketlauncher/fire", CHAN_WEAPON);
		}
		CYBR F 12 A_FaceTarget
		CYBR E 12 BRIGHT
		{
			A_CustomMissile("CyberdemonRocket", 48, -16);
			A_PlaySound ("weapons/rocketlauncher/fire", CHAN_WEAPON);
		}
		Goto See
	MissileWalking:
		CYBR F 12 A_FaceTarget
		CYBF A 0 A_Quake (3,4,0,750,0)
		CYBF A 3 { A_Chase("",""); A_PlaySound("monsters/cyberdemon/hoof"); A_FaceTarget; }
		CYBF ABBCC 3 { A_Chase("",""); A_FaceTarget; }
		CYBF D 0 A_Quake (3,4,0,750,0)
		CYBF D 3 { A_Chase("",""); A_PlaySound("spider/walk");  A_FaceTarget; }
		CYBF D 3 { A_Chase("",""); A_FaceTarget; }
		CYBF E 3 BRIGHT
		{
			A_FaceTarget;
			A_Chase("","");
			A_CustomMissile("CyberdemonRocket", 48, -16);
			A_PlaySound ("weapons/rocketlauncher/fire", CHAN_WEAPON);
		}
		CYBF E 3 { A_Chase("",""); A_PlaySound("monsters/cyberdemon/hoof"); A_FaceTarget; }
		CYBF BBCC 3 { A_Chase("",""); A_FaceTarget; }
		CYBF D 0 A_Quake (3,4,0,750,0)
		CYBF D 3 { A_Chase("",""); A_PlaySound("spider/walk"); A_FaceTarget; }
		CYBF D 3 { A_Chase("",""); A_FaceTarget; }
		CYBF E 3 BRIGHT
		{
			A_FaceTarget;
			A_Chase("","");
			A_CustomMissile("CyberdemonRocket", 48, -16);
			A_PlaySound ("weapons/rocketlauncher/fire", CHAN_WEAPON);
		}
		CYBF E 3 { A_Chase("",""); A_PlaySound("monsters/cyberdemon/hoof"); A_FaceTarget; }
		CYBF BBCC 3 { A_Chase("",""); A_FaceTarget; }
		CYBF D 0 A_Quake (3,4,0,750,0)
		CYBF D 3 { A_Chase("",""); A_PlaySound("spider/walk"); A_FaceTarget; }
		CYBF D 3 { A_Chase("",""); A_FaceTarget; }
		CYBR E 12 BRIGHT
		{
			A_FaceTarget;
			A_CustomMissile("CyberdemonRocket", 48, -16);
			A_PlaySound ("weapons/rocketlauncher/fire", CHAN_WEAPON);
		}
		CYBR F 6 A_FaceTarget
		Goto See
		
	Pain.Axe:
	Pain.Fist:
	Pain.BerserkFist:
	Pain:
		CYBR G 10 A_Pain
		Goto See
	Death:
		CYBR G 0 A_GiveToTarget("ScoreItem", 10000)
		CYBR G 10 A_Scream
		CYBR H 10 
		CYBR G 10 A_PlaySound("monsters/cyberdemon/die2", CHAN_AUTO, 1.0, 0, ATTN_NONE)
		CYBR H 8
		CYBR I 0
		{
			A_CustomMissile ("CyberdemonExplosionParticle", random(8,32), 0, random (0, 360), 2, random (32, 64));
			A_CustomMissile ("CyberdemonExplosionParticle", random(8,32), 0, random (0, 360), 2, random (32, 64));
			A_CustomMissile ("CyberdemonExplosionParticle", random(8,32), 0, random (0, 360), 2, random (32, 64));
			A_CustomMissile ("CyberdemonExplosionParticle", random(8,32), 0, random (0, 360), 2, random (32, 64));
			A_CustomMissile ("CyberdemonExplosionParticle", random(8,32), 0, random (0, 360), 2, random (32, 64));
			A_CustomMissile ("CyberdemonExplosionParticle", random(8,32), 0, random (0, 360), 2, random (32, 64));
			A_CustomMissile ("CyberdemonExplosionParticle", random(8,32), 0, random (0, 360), 2, random (64, 110));
			A_CustomMissile ("CyberdemonExplosionParticle", random(8,32), 0, random (0, 360), 2, random (64, 110));
			A_CustomMissile ("CyberdemonExplosionParticle", random(8,32), 0, random (0, 360), 2, random (64, 110));
			A_CustomMissile ("CyberdemonExplosionParticle", random(8,32), 0, random (0, 360), 2, random (64, 110));
			A_CustomMissile ("CyberdemonExplosionParticle", random(8,32), 0, random (0, 360), 2, random (64, 110));
			A_CustomMissile ("CyberdemonExplosionParticle", random(8,32), 0, random (0, 360), 2, random (64, 110));
			A_CustomMissile ("CyberdemonExplosionParticle", random(8,32), 0, random (0, 360), 2, random (64, 110));
			
			A_CustomMissile ("CyberdemonGibber", random(8,32), 0, random (0, 360), 2, random (32, 64));
			A_CustomMissile ("CyberdemonGibber", random(8,32), 0, random (0, 360), 2, random (32, 64));
			A_CustomMissile ("CyberdemonGibber", random(8,32), 0, random (0, 360), 2, random (32, 64));
			A_CustomMissile ("CyberdemonGibber", random(8,32), 0, random (0, 360), 2, random (32, 64));
			A_CustomMissile ("CyberdemonGibber", random(8,32), 0, random (0, 360), 2, random (64, 110));
			A_CustomMissile ("CyberdemonGibber", random(8,32), 0, random (0, 360), 2, random (64, 110));
			A_CustomMissile ("CyberdemonGibber", random(8,32), 0, random (0, 360), 2, random (64, 110));
		}
		CYBR I 5 
		CYBR JKL 5
		CYBR M 5 A_NoBlocking
		CYBR N 5
		CYBR O 30
		CYBR O -1 A_KillMaster //A_BossDeath
		Stop
	}
}

ACTOR CyberdemonRocket
{
	Radius 11
	Height 8
	Speed 20
	Damage 20
	Projectile
	+RANDOMIZE
	Obituary "$OB_MPROCKET"
	Decal Scorch
	States
	{
	Spawn:
		MISL A 0 A_PlaySound ("weapons/rocketlauncher/loop", CHAN_BODY, 1.0, 1)
		MISL A 0 A_SpawnItem ("RocketTrailSmoke", 0, 6, 0, 0)
		MISL AAAA 1 Bright A_JumpIfInTargetInventory("RLDetonator",1,"Death")
		Loop
	Death:
		TNT1 A 0 A_SpawnItemEx("Explosion",0,0,24,0,0,0,0,SXF_TRANSFERPOINTERS)
		Stop
	}
}

ACTOR CyberdemonExplosionParticle
{
	Radius 10
	Height 10
	Speed 5
	PROJECTILE
	+NOCLIP
	Decal Scorch
	States
	{
		Spawn:
		EXPL A 0
		EXPL A 2 BRIGHT
		EXPL B 2 BRIGHT 
		EXPL C 2 BRIGHT 
		EXPL DEF 2
		Stop
	}
}

actor CyberdemonGibber
{
  radius 20
  height 56
  +NOCLIP
    states
  {
  Spawn:
        TNT1 A 0
		TNT1 A 0
		{
			A_CustomMissile ("FlyingBlood", random(8,32), 0, random (0, 360), 2, random (0, 160));
			A_CustomMissile ("FlyingBlood", random(8,32), 0, random (0, 360), 2, random (0, 160));
			A_CustomMissile ("FlyingBlood", random(8,32), 0, random (0, 360), 2, random (0, 160));
			A_CustomMissile ("FlyingBlood", random(8,32), 0, random (0, 360), 2, random (0, 160));
			A_CustomMissile ("FlyingBlood", random(8,32), 0, random (0, 360), 2, random (0, 160));
			A_CustomMissile ("MetaSploosh", random(8,32), 0, random (0, 360), 2, random (0, 160));
			A_CustomMissile ("MetaSploosh", random(8,32), 0, random (0, 360), 2, random (0, 160));
			A_CustomMissile ("MetaSploosh", random(8,32), 0, random (0, 360), 2, random (0, 160));
			A_CustomMissile ("MetaSploosh", random(8,32), 0, random (0, 360), 2, random (0, 160));
			A_CustomMissile ("MetaSploosh", random(8,32), 0, random (0, 360), 2, random (0, 160));
			A_SpawnItem("BloodSplat");
		}
        TNT1 A 1 A_SpawnItemEx ("MetaGib1", 1, 1, random(8,32), random(0,5), random(0,5), random(8,18), random(0,360), 128, 0)
        TNT1 A 0 A_SpawnItemEx ("MetaGib2", 1, 1, random(8,32), random(0,5), random(0,5), random(8,18), random(0,360), 128, 0)
        TNT1 A 0 A_SpawnItemEx ("MetaGib3", 1, 1, random(8,32), random(0,5), random(0,5), random(8,18), random(0,360), 128, 0)
        TNT1 A 0 A_SpawnItemEx ("MetaGib4", 1, 1, random(8,32), random(0,5), random(0,5), random(8,18), random(0,360), 128, 0)
        TNT1 A 0 A_SpawnItemEx ("MetaGib5", 1, 1, random(8,32), random(0,5), random(0,5), random(8,18), random(0,360), 128, 0)
        TNT1 A 1 A_SpawnItemEx ("MetaGib6", 1, 1, random(8,32), random(0,5), random(0,5), random(8,18), random(0,360), 128, 0)
        TNT1 A 0 A_SpawnItemEx ("MetaGib7", 1, 1, random(8,32), random(0,5), random(0,5), random(8,18), random(0,360), 128, 0)
        TNT1 A 0 A_SpawnItemEx ("MetaGib8", 1, 1, random(8,32), random(0,5), random(0,5), random(8,18), random(0,360), 128, 0)
        TNT1 A 0 A_SpawnItemEx ("MetaGib9", 1, 1, random(8,32), random(0,5), random(0,5), random(8,18), random(0,360), 128, 0)
        TNT1 A 0 A_SpawnItemEx ("MetaGib10", 1, 1, random(8,32), random(0,5), random(0,5), random(8,18), random(0,360), 128, 0)
        TNT1 A 1 A_SpawnItemEx ("MetaGib11", 1, 1, random(8,32), random(0,5), random(0,5), random(8,18), random(0,360), 128, 0)
        TNT1 A 0 A_SpawnItemEx ("MetaGib12", 1, 1, random(8,32), random(0,5), random(0,5), random(8,18), random(0,360), 128, 0)
        Stop
    }
}