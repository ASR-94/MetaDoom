// The Artifact!!!
actor ArtifactSoundToken : _Boolean {}

actor ArtifactPickup : CustomInventory
{
	inventory.pickupmessage "$GOTARTIFACT"
	Tag "$TAGARTIFACT"
	inventory.icon "INVARTI"
	inventory.pickupsound "inventory/artifact/get"
	+INVENTORY.ALWAYSPICKUP
	+FLOATBOB
	scale 0.75
	states
	{
	Spawn:
		ARTI ZYXY 10
		loop
	Pickup:
		TNT1 A 0 A_GiveInventory ("Artifact", 1)
		TNT1 A 0 A_GiveInventory ("GrenadeAmmo", 3)
		stop
	}
}

actor Artifact : CustomInventory
{
	inventory.pickupmessage "$GOTARTIFACT"
	Tag "$TAGARTIFACT"
	inventory.icon "INVARTI"
	inventory.pickupsound "inventory/artifact/get"
	inventory.amount 1
	inventory.maxamount 1
	+INVENTORY.INVBAR
	scale 0.75
	+FLOATBOB
	states
	{
	Spawn:
		ARTI ZYXY 10
		loop
	Use:
		TNT1 A 0 A_JumpIfInventory("InventoryCooldownToken", 1, "FailureCooldown")
		TNT1 A 0 A_JumpIfInventory("ArtifactTimer", 1, "FailureCooldown")
		TNT1 A 0 ACS_NamedExecuteWithResult("InventoryCooldown")
		TNT1 A 0 A_JumpIfInventory("GrenadeAmmo", 1, "Fire")
		goto Failure
	Fire:
		TNT1 A 0 A_PlaySound("inventory/artifact/on")
		TNT1 A 0 A_GiveInventory("ArtifactTimer", 175)
		TNT1 A 0 A_TakeInventory("GrenadeAmmo", 1)
		fail
	Failure:
		TNT1 A 0 A_PlaySound("menu/invalid")
		TNT1 A 0 A_Log("You don't have any grenades!", 1)
		fail
	FailureCooldown:
		TNT1 A 0 
		TNT1 A 0 
		fail
	}
}